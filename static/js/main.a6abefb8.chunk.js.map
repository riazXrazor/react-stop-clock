{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["defaultOptions","id","onTick","presist","key","presistanceType","window","localStorage","constructor","options","props","useState","t","this","d","getItem","parseJSON","console","useEffect","timer","setInterval","setDuration","intervalToDuration","end","Date","clearInterval","className","map","duration","val","style","margin","removeItem","setItem","time","differenceInSeconds","e","CountdownTimer","log","TimerComponent","isTimerActive","stopTimer","startTimer","getCurrentTimeInSeconds","App","React","value","setValue","labels","minutes","seconds","disabled","onClick","ReactDOM","render","document","getElementById"],"mappings":"4QAOA,IAAIA,EAAiB,CACnBC,GADmB,EAEnBC,OAFmB,KAGnBC,SAHmB,EAInBC,IAJmB,mBAKnBC,gBAAiBC,OAAOC,c,MAE1B,MACEC,YAAYC,GAAS,oBASHC,IAAU,QACVC,mBAAS,KACvB,IAAIC,EAAI,IAAR,KACA,GAAIC,KAAJ,QAAkB,CAChB,MAAMC,EAAID,KAAKR,gBAAgBU,QAAQ,GAA7B,OAAgCF,KAAKT,IAArC,YAA4CS,KAAtD,KACA,EACED,EAAII,YAAJJ,GAEAC,KAAA,kCACKA,KAAKT,IADV,YACiBS,KADjB,IAEED,EAFF,eAOJ,OADAK,eACA,IAdI,EADoB,sBAiBMN,mBAAhC,IAjB0B,mBAiBpB,EAjBoB,KAiBpB,EAjBoB,KAsC1B,OApBAO,oBAAU,KACR,MAAMC,EAAQC,YACZ,IACEC,EAAY,KACV,MAAMP,EAAIQ,YAAmB,SAE3BC,IAAK,IAAIC,OAKX,OAHIX,KAAJ,QACEA,KAAA,UAEF,IAVN,KAcA,MAAO,KACLY,mBAhBJP,IAqBE,yBAAKQ,UAAU,8BACZC,IAAIC,EAAU,CAACC,EAAKzB,IACZyB,EACL,0BACEH,UAAS,gCADX,GAEEtB,IAAG,UAAKS,KAAKT,IAAV,YAAiByB,GAAjB,OAFL,GAGEC,MAAO,CAAEC,OAAQ,QAHnB,MAME,2BAAOL,UAAS,2BAAsBtB,IACnCM,UAAgBA,SAAhBA,GAAoCA,SAApCA,GARG,IAAV,QAlDa,mBAmEL,MAAQG,KAAKR,gBAAgBU,QAAQ,GAA7B,OAAgCF,KAAKT,IAArC,YAA4CS,KAnE/C,oBAqET,IAAMA,KAAKR,gBAAgB2B,WAAW,GAAhC,OAAmCnB,KAAKT,IAAxC,YAA+CS,KArE5C,qBAuER,IACXA,KAAKR,gBAAgB4B,QAAQ,GAA7B,OACKpB,KAAKT,IADV,YACiBS,KADjB,KAEE,IAAIW,MA1Ea,+BA6ER,IACXX,KAAKR,gBAAgB4B,QAAQ,GAA7B,OACKpB,KAAKT,IADV,YACiBS,KADjB,KAEE,IAAIW,MAhFa,4CAmFK,KACxB,IACE,MAAMU,EAAOlB,YACXH,KAAKR,gBAAgBU,QAAQ,GAA7B,OAAgCF,KAAKT,IAArC,YAA4CS,KAD9C,MAGA,OAAOsB,YAAoB,IAAD,KAA1B,GACA,MAAOC,GACP,WAzFFpC,EAAiB,8BAAwBS,GACzCI,KAAA,GAAUb,EAAV,GACAa,KAAA,OAAcb,EAAd,OACAa,KAAA,QAAeb,EAAf,QACAa,KAAA,IAAWb,EAAX,IACAa,KAAA,gBAAuBb,EAAvB,kB,eCVA,IAAIqC,EAAe,CACrBpC,GAAI,EACJE,SAAS,EACTD,OAASkC,IACPnB,QAAQqB,IAAIF,MATdG,E,EAAAA,eACAC,E,EAAAA,cACAC,E,EAAAA,UACAC,E,EAAAA,WACAC,E,EAAAA,wBAoCaC,MA3BH,KAAO,MAAD,EACUC,IAAMlC,SAAS,GADzB,mBACTmC,EADS,KACFC,EADE,KAGhB,OACE,oCACE,kBAACR,EAAD,CACES,OAAQ,CACNC,QAAS,MACTC,QAAS,SAGb,6BAAMJ,GACN,6BACE,4BAAQK,UAAWX,EAAeY,QAASV,GAA3C,SAGA,4BAAQS,SAAUX,EAAeY,QAASX,GAA1C,QAGA,4BAAQW,QAAS,IAAML,EAASJ,MAAhC,kBChCRU,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.a6abefb8.chunk.js","sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { useState, useEffect } from 'react'\nimport intervalToDuration from 'date-fns/intervalToDuration'\nimport parseJSON from 'date-fns/parseJSON'\nimport differenceInSeconds from 'date-fns/differenceInSeconds'\nimport map from 'lodash/map'\n\nlet defaultOptions = {\n  id: 1,\n  onTick: null,\n  presist: false,\n  key: 'react-stop-clock',\n  presistanceType: window.localStorage\n}\nclass ReactStopClock {\n  constructor(options) {\n    defaultOptions = { ...defaultOptions, ...options }\n    this.id = defaultOptions.id\n    this.onTick = defaultOptions.onTick\n    this.presist = defaultOptions.presist\n    this.key = defaultOptions.key\n    this.presistanceType = defaultOptions.presistanceType\n  }\n\n  TimerComponent = (props) => {\n    const [start] = useState(() => {\n      let t = new Date()\n      if (this.presist) {\n        const d = this.presistanceType.getItem(`${this.key}-${this.id}`)\n        if (d) {\n          t = parseJSON(d)\n        } else {\n          this.presistanceType.setItem(\n            `${this.key}-${this.id}`,\n            t.toISOString()\n          )\n        }\n      }\n      console.log(t)\n      return t\n    })\n    const [duration, setDuration] = useState({})\n    useEffect(() => {\n      const timer = setInterval(\n        () =>\n          setDuration(() => {\n            const d = intervalToDuration({\n              start,\n              end: new Date()\n            })\n            if (this.onTick) {\n              this.onTick(d)\n            }\n            return d\n          }),\n        1000\n      )\n      return () => {\n        clearInterval(timer)\n      }\n    }, [])\n\n    return (\n      <div className='react-stop-clock-container'>\n        {map(duration, (val, key) => {\n          return val ? (\n            <span\n              className={`react-stop-clock-time-${key}`}\n              key={`${this.key}-${val}${key}`}\n              style={{ margin: '3px' }}\n            >\n              {val}{' '}\n              <small className={`react-stop-clock-${key}`}>\n                {props.labels && props.labels[key] ? props.labels[key] : key}\n              </small>\n            </span>\n          ) : null\n        })}\n      </div>\n    )\n  }\n\n  isTimerActive = () => !!this.presistanceType.getItem(`${this.key}-${this.id}`)\n\n  stopTimer = () => this.presistanceType.removeItem(`${this.key}-${this.id}`)\n\n  startTimer = () =>\n    this.presistanceType.setItem(\n      `${this.key}-${this.id}`,\n      new Date().toISOString()\n    )\n\n  resetTimer = () =>\n    this.presistanceType.setItem(\n      `${this.key}-${this.id}`,\n      new Date().toISOString()\n    )\n\n  getCurrentTimeInSeconds = () => {\n    try {\n      const time = parseJSON(\n        this.presistanceType.getItem(`${this.key}-${this.id}`)\n      )\n      return differenceInSeconds(new Date(), time)\n    } catch (e) {\n      return 0\n    }\n  }\n}\n\nexport default ReactStopClock\n","import React from 'react'\n\nimport CountdownTimer from 'react-stop-clock'\nimport 'react-stop-clock/dist/index.css'\n\nconst {\n  TimerComponent,\n  isTimerActive,\n  stopTimer,\n  startTimer,\n  getCurrentTimeInSeconds\n} = new CountdownTimer({\n  id: 1,\n  presist: true,\n  onTick: (e) => {\n    console.log(e)\n  }\n})\n\nconst App = () => {\n  const [value, setValue] = React.useState(0)\n\n  return (\n    <>\n      <TimerComponent\n        labels={{\n          minutes: 'min',\n          seconds: 'sec'\n        }}\n      />\n      <div>{value}</div>\n      <div>\n        <button disabled={!isTimerActive} onClick={startTimer}>\n          Start\n        </button>\n        <button disabled={isTimerActive} onClick={stopTimer}>\n          Stop\n        </button>\n        <button onClick={() => setValue(getCurrentTimeInSeconds())}>\n          get seconds\n        </button>\n      </div>\n    </>\n  )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}